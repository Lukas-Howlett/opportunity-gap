Opportunity Gap Design Process/Analysis  
Lukas Howlett and Andrew Notter

1. **Introduction** 

	The “opportunity-gap” describes the phenomenon in which under-represented minority(URM) students will perform disproportionately worse than Non-URM students in subsequent courses following a prerequisite course in higher education. The basis for this is that  Non-URM students are better able to take advantage of educational resources that URM students can’t for a multitude of different reasons stemming from but not limited to social class, familial income, family living situation, knowledge about the financial aid system, and the quality of high school attended.   
	By observing the students' prerequisite and subsequent grades, their true academic performance can be seen without the outside influence of hard-to-obtain educational resources. Therefore, in order to visualize this opportunity gap, we will cover and implement some visualization techniques/strategies that should make the opportunity gap easier to see.

2. **Brainstorming, Iteration 0**

We started learning about the Opportunity Gap in lecture which gave us background information on how URM students perform worse in higher education or subsequent classes. Our task is to create a visualization that best represents this opportunity gap using the fake data generator provided to us by Professor Li. We began by discussing the types of graphs that we felt might most effectively highlight this opportunity gap. Initially we thought that a scatter plot might be our best option, however upon further discussion we reasoned that  a scatter plot would be quite hard to follow and add visual confusion rather than clarity.   
Our next idea was to draw what some potential other visualizations would look like to get a feel of how effectively they visualized this opportunity gap. We decided to use both a Bar and Line Graph, and a multiple y-axis bar and line graph as shown by figure 1\. For graph 1 in figure 1, we decided that having a graph without individual grades would enhance the clarity of the visualization as many data points would create a lot of noise. Not to mention the fact that the length of bars are easier for the human eye to perceive differences in quantitative values and that having a line connecting the values of prerequisite and subsequent bars, makes the graph easier to read from left to right and realize a change over time. For graph 2 of figure 1, again we decided leaving out individual grades would be beneficial. We also thought having both average grade in prerequisite and subsequent classes plotted on the x axis vs both average grade in those classes along the left y-axis and average family income along the right y-axis would add additional insight into the opportunity gap by visualizing multiple quantitative variables at once. However, both of these ideas were scrapped since first-gen vs non first-gen students and familial income were not a part of the dataset we’d be utilizing, although they were great to get our brainstorming process started.   
![pic1](https://github.com/user-attachments/assets/a649cf14-05dd-4a30-93b7-b0a3024d9f9f)
**Figure 1: potential mock up of 1\. Bar and Line Graph and 2\. Multiple Y-axis Bar and Line Graph.** 

3. **Exposing the Opportunity Gap**

	The opportunity gap, in its simplest form, is a change in something over time as we’re dealing with grades from a prerequisite class and grades from a subsequent class. Change over time is best presented to the human eye as a variable, at least in the west, that can be tracked from left to right since that’s how we read. Using this knowledge, a graph or chart that can take advantage of this use of left to right would prove to serve well in helping visualize the opportunity gap. A first iteration of the visualization could look like such, a line graph tracking each individual student’s grades from left to right with two Y-axes, one representing prerequisite grades on the left and another representing subsequent grades on the right:
![Opportunity Gap Design Process and Analysis](https://github.com/user-attachments/assets/8884111f-5bfb-4092-a58d-a2754541a3c4)

With this visualization, the hope is that viewers will be able to pick out any given line, representing a single student's grade, and follow it from left to right. This way viewers will view the chart starting with prerequisite grade to subsequent grade and be able to see the positive or negative change in grade earned over time. Color is also used to categorize URM and non-URM students so that viewers can discern the two and hopefully observe that URM student’s grades trend downwards while non-URM student’s grades trend upwards. 

4. **Iteration 1: Analysis**

	In google colab notebooks, we are able to see this visualization in use with the opportunity gap fake data generator that we were given to use for this assignment:
![pic2](https://github.com/user-attachments/assets/3220f8b1-3d69-4465-b221-b94af0e652ff)

Immediately we can see that there are a bunch of overlapping lines making the visualization rather noisy, and this even comes after reducing the width of each line to reduce overlap by creating more space in between lines. Alpha values of the lines were also decreased to make them somewhat transparent so that lines don’t completely cover one another. Because of this, picking out a single student’s prerequisite grade and trying to find their subsequent grade becomes nearly impossible. Despite that, the visualization still shows that there is a subtle trend in blue lines having a negative slope representing worsening URM students' grades in comparison to non-URM students who don’t seem to trend upwards or downwards (also it’s a little hard to see red lines in general as they’re mostly occluded by blue lines). 

6. **Iteration 1: Viewer Feedback and Possible Improvements**

	In showing this visualization to various viewers, we received a number of critiques and feedback after asking them what they believe the graph is showing. A simple one, was that viewers didn’t know what URM stood for, which can easily be fixed by using the full name in the visualization’s legend. It was also not immediately clear to viewers that over time, most URM students experienced a decrease in grade earned in comparison to non-URM students, just that URM students’ grades were trending downwards. To better compare the two, it would probably be beneficial to add a filtering tool so that viewers can look at URM and non-URM grades independently of each other as well. It may also help to decrease the minimum y-range of the chart from 0 to around 30 since there aren’t any data points below 30; this would effectively help to “zoom in” on the graph and provide more clarity between which line is which. Overall, most viewers had a pretty difficult time discerning what they were looking at because of a lack of label explanation and too many data points obscuring one another.   
	What we believe this visualization mainly lacks, is the ability to quantify these grades in any sort of form. For example, viewers don’t know how many students are improving or worsening their academic performance without having to meticulously count each line. When quantifying data, the human eye best responds to length measurements as opposed to area or volume, therefore we think the best course of action is to also somehow incorporate a complimentary multi-bar chart for viewers to compare the lengths of in our visualization. As was aforementioned, this visualization also lacks the ability to accurately see an individual student’s precise prerequisite and subsequent grade. We think a good solution to this problem would be to make our visualization interactive to viewers with the use of HoverTool to create informative tooltips and zooming functionality. 

7. **Iteration 2: Analysis**

	Taking this feedback and further analysis of our first iteration into consideration, our second iteration of opportunity gap visualization looks like this:
![pic3](https://github.com/user-attachments/assets/d5c99b22-56e2-4de2-9f19-a1ffa28ec04b)

	The most visibly noticeable change in the second iteration of the visualization is that the initial line chart is zoomed-in and the addition of the complimentary multi-bar graph that shows the count of URM and Non-URM students who either had improved grades or worsened grades from prerequisite to subsequent course. At first glance, it may seem like Non-URM students are doing worse because there is a higher count of them receiving worse grades than URM students, however this is not the case because URM students only make up 30% of the fake data. This means that even though there is a greater count of Non-URM students receiving worse grades, they are doing better relatively as a population and percentage wise. For example, about ⅔ of the URM population are doing worse in subsequent courses while a little less than half of the Non-URM population are doing worse in subsequent courses. With this in mind, it’ll probably be a good idea for us to switch from count to percentages for the complimentary bar graph as it’s likely that viewer participants will misinterpret it as it is now.   
	Unfortunately, data filtering and interaction could not be made to work with the current visualization and code setup since the tooltips couldn’t be linked to the source of the dataframe leaving ‘???’ for prerequisite and subsequent values. Additionally, CheckboxGroups for some reason were not filtering data points at all whether we decided to use CustomJS or checkbox callbacks. The only viewer interaction that does work is the ability to zoom in on specific sections of the graph, although this does lag a little bit due to the volume of data.

8. **Iteration 2: Viewer Feedback and Possible Improvements**

After showing the second iteration of our visualization to viewers, we were surprised to see that a decent amount of viewers could understand what we wanted the complimentary bar chart to convey. That is, some people were able to tell that more URM students were receiving worse grades than Non-URM students and that less URM students were receiving improved grades than Non-URM students. These viewers were able to recognize that as a population, URM students were struggling and were able to ignore the fact that the raw count of Non-URM students in both the improving and worsening sections were higher. However, not every viewer was able to realize this and found that the complimentary bar chart actually contradicted our main visualization. These viewers answered that the bar chart was showing them that Non-URM students were struggling more because there was a higher count of them receiving worse grades than URM students. After hearing about this from viewers, we decided that changing our bar chart from student count to percentage of race population was an absolute necessity in order to avoid this misunderstanding in the next iteration.   
Another aspect of this iteration of the visualization that viewers were able to pick up on more clearly was change over time. The sub-titles for each bar in the complimentary chart was either labeled with an “Improved” or “Worsened” which solidified the fact that this visualization is trying to show a change over time. This is likely because the state of being improved or having worsened can only happen after time has passed and therefore more viewers were able to catch on to the fact prerequisite grades were improving or worsening into resulting subsequent grades.   
Moreover, because we could not get data filtering to work properly with the CheckboxGroups system, we’ll likely split the main visualization into two different line charts for URM and Non-URM instead in order to increase chart visibility and hopefully make URM students’ worsening grades a little easier to see. Additionally, the Y-axis of the bar chart should  also be labeled to avoid unnecessary confusion about what the bars' quantitative values are representing. 

8. **Iteration 3: Analysis**

	Taking this feedback and further analysis of our second iteration into consideration, our third iteration of opportunity gap visualization looks like this:
  ![pic4](https://github.com/user-attachments/assets/65284354-109a-45d9-9053-437e5d18fd71)

	The third iteration of our visualization brings about a couple of new changes to address the feedback that we received from iteration 2\. The first of which is that URM and Non-URM student line charts have been separated into their own respective charts in order to decrease noise and increase readability of each population. It is now much easier to see that URM students’ grades trend downwards and that Non-URM students’ grades don’t seem to trend in either direction. Another thing to note about separating these two populations into their own charts is that there’s a visible difference in the amount of URM data points vs. Non-URM data points, driving home the fact that URM students are a much smaller population than Non-URM students. We may want to add a single standout line to represent the average prerequisite grade and average subsequent grade to further paint out the trends in the next iteration.  
	Furthermore, the complimentary bar chart has been changed to show a measure of population percentage improved/worsened instead of a count of how many students had improved/worsened. Now it is much more clear that there are less URM students improving than Non-URM students and far more URM students worsening than Non-URM students relative to their population. With that being said, it might be worth looking into making this bar chart a 100% stacked bar chart since we are dealing with two wholes, URM’s as a population and Non-URM’s as a population, so using a 100% stacked bar chart would be beneficial in representing the improving and worsening percentages of those wholes and reduce confusion for people thinking that the entire chart represents a single or more than two populations. Lastly, x and y axis labels have been added to ensure that viewers know what values are being represented to avoid confusion.

10. **Iteration 3: Viewer Feedback and Possible Improvements**

	After showing our third iteration of our visualization to viewers, we were met with many positive takeaways. The first of which is that changing the bar graph from count to percentage of population made it much easier for viewers to see the difference in performance between URM and Non-URM students. Viewers were all able to see that there were more URM students worsening than there were improving comparatively to their own population as opposed to Non-URM students who were at about a 50/50 split. Making sure that the axes and bar graph had informative names helped a great deal as well to make sure that viewers had no misunderstandings in what each part of the chart represented.   
	Furthermore, splitting the main visualization into one line chart for URM students and another for Non-URM students was also positively received by viewers. Most viewers were able to confidently state that the majority of URM students’ grades trend downwards while Non-URM students’ grades remain fairly consistent across both their prerequisite and subsequent scores. Even with so many points on the graph it was fairly clear to viewers which way grades seemed to trend for each population group; because every single datapoint is plotted, viewers can also see just how many more Non-URM students there are than URM students as the Non-URM student chart is much denser than the URM student chart. 

11. **Iteration 4 (FINAL): Analysis**

	Taking this feedback and further analysis of our second iteration into consideration, our third iteration of opportunity gap visualization looks like this:
 ![pic5](https://github.com/user-attachments/assets/09f0ae40-17bb-4291-94fc-08a4dffd366c)

	In the fourth and final iteration of our opportunity gap visualization, we make two significant changes to both our main visualization and our complimentary bar chart. For the main visualization, we added a yellow line that represents the average grade change by taking the average prerequisite grade and average subsequent grade and then plotting that line in yellow to stand out from the rest. We did this so that if it wasn’t clear to viewers already which way the grades were trending (or not trending), they could simply observe the slope of the yellow line and immediately understand the trend from that alone. In our visualization above, it is very clear that the slope of the yellow line for URM students is negative, meaning they are mostly worsening, while the slope of the yellow line for Non-URM students is basically 0, meaning that about half the population is improving while the other half is worsening.   
	For our complimentary bar chart, we moved from a multiple-bar format to a 100% stacked bar chart format with a bar for both URM and Non-URM students that shows the percentage of the respective population that improved in green and worsened in gray. This is an improvement from our previous design because we are now able to visualize each population as their own singular bar allowing for easier inter-population comparison; it also helps to avoid confusion from our previous iteration as the last graph could’ve been mistaken to have represented a singular population or four populations instead of two. 

13. **Iteration 4 (FINAL): Viewer Response**

	After showing the fourth iteration of our visualization to viewers, we were again met with positive feedback. With the main visualization, viewers felt that the yellow line, representing the average grade change, was very helpful in helping them identify the trend or lack of trend in the line charts. Not one viewer that we asked was unsure of whether or not URM students were performing worse in subsequent classes than Non-URM students, cementing the yellow average grade line as a necessity in our final iteration.   
	When observing the barchart, viewers also had a much easier time understanding that URM students were struggling with worsening grades when compared to Non-URM students. The 100% stacked bar chart format also helped viewers to understand the percentage of each population that was either improving or worsening, which in the previous iteration of our visualization, was not entirely clear to them. While it would be ideal for URM Improved colors to be blue and Non-URM improved colors to be red, to match the colors of our initial visualization, it was not easily possible using bokeh’s vbar\_stack function. Other than this small detail, we feel that overall changing this aspect of our bar graph yielded a net positive that we will keep for our visualization’s final iteration. 

14. **Conclusion**

	To conclude, we reached the final iteration of our visualization by first identifying the opportunity gap question as a change over time, leading us to use a left-to-right line chart as our main visualization. The biggest issues we encountered with our choice to use a line chart was that the dataset we were using had thousands of data points, meaning our line chart was extremely cluttered/noisy, and that we had no way to properly quantify our data outside of density perception. Despite this, we stuck with the line chart because we thought it best represented a change in something over time. Therefore to address the line chart’s shortcomings, we separated our line charts by population, one for URM students’ grades and another for Non-URM students’ grades, to relieve a lot of the previous noise and added a yellow line to each chart, representing the average grade change so that viewers could easily see that more URM students were worsening from prerequisite to subsequent class. We also included a complimentary 100% stacked bar chart that represented each population as a whole in order to quantify what our line chart couldn’t. Doing this allowed viewers to very easily see what percentage of each population was either improving or worsening their grades and also allowed viewers to compare how each population was doing relative to the other. The end result of all these iterations, is a visualization that we feel is able to clearly depict the opportunity gap and shine light on this ongoing issue.
